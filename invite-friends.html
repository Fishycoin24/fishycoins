<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invite Friends</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="material/css/styles.css">
    <link rel="stylesheet" href="material/css/st.css">
    <style>
        .referral-container {
            margin: 20px;
            text-align: center;
        }

        .referral-list {
            margin-top: 20px;
            text-align: left;
            display: none; /* Initially hide the referred friends list */
        }

        .referral-list ul {
            list-style-type: none;
            padding: 0;
        }

        .referral-list li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="frens-invite">
        <div class="frens-invite-button referral-container">
            <p>Your unique referral link:</p>
            <input type="text" value="" id="referralLink" readonly>
            <button id="copyButton">Copy Link</button>

            <div class="referral-list" id="referralListContainer">
                <h3>Referred Friends:</h3>
                <ul id="referredFriends">
                    <!-- Referred user IDs will be dynamically added here -->
                </ul>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="home.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>HOME</span>
        </a>
        <a href="leaderboard.html" class="nav-item">
            <i class="fas fa-trophy"></i>
            <span>LEADERBOARD</span>
        </a>
        <a href="invite-friends.html" class="nav-item">
            <i class="fas fa-user-friends"></i>
            <span>FRIENDS</span>
        </a>
        <a href="task.html" class="nav-item">
            <i class="fas fa-tasks"></i>
            <span>TASKS</span>
        </a>
        <a href="balance.html" class="nav-item">
            <i class="fas fa-wallet"></i>
            <span>BALANCE</span>
        </a>
    </nav>

    <script>
        // Simulating user ID (in real implementation, fetch this from backend)
        const userId = "12345"; // Replace with dynamic user ID
        const referralBaseURL = "https://t.me/fishycion_bot?ref=";

        // Generate referral link
        const referralLink = `${referralBaseURL}${userId}`;
        document.getElementById("referralLink").value = referralLink;

        // Copy referral link to clipboard
        document.getElementById("copyButton").addEventListener("click", () => {
            const linkInput = document.getElementById("referralLink");
            linkInput.select();
            document.execCommand("copy");
            alert("Referral link copied to clipboard!");
        });

        // Simulating referred friends (in real implementation, fetch this from backend when a referral is confirmed)
        const referredFriends = [];

        // Function to update referred friends list dynamically
        function updateReferredFriends(newFriendId) {
            referredFriends.push(newFriendId);
            const referredFriendsList = document.getElementById("referredFriends");
            const listItem = document.createElement("li");
            listItem.textContent = `User ID: ${newFriendId}`;
            referredFriendsList.appendChild(listItem);

            // Show the referral list container if it was hidden
            document.getElementById("referralListContainer").style.display = "block";
        }

        // Example usage: Simulate a new referred friend joining
        // In real implementation, this function will be triggered by backend data
        setTimeout(() => {
            updateReferredFriends("67890"); // Replace with dynamic referred user ID
        }, 3000); // Simulate referral after 3 seconds

    </script>

    <script src="material/js/cojs.js"></script>
    <script src="material/js/scripts.js"></script>
</body>
</html>
